obtv-admin@mov-orc-dev:/opt/color-routing-orchestrator$ cd /opt/color-routing-orchestrator
sudo git pull
sudo npm run build
sudo systemctl restart color-routing-orchestrator
remote: Enumerating objects: 11, done.
remote: Counting objects: 100% (11/11), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 7 (delta 3), reused 7 (delta 3), pack-reused 0 (from 0)
Unpacking objects: 100% (7/7), 17.14 KiB | 974.00 KiB/s, done.
From https://github.com/tbnobed/mover
   7303688..087204a  main       -> origin/main
Updating 7303688..087204a
Fast-forward
 attached_assets/Pasted-obtv-admin-mov-orc-dev-opt-color-routing-orchestrator-j_1769794130624.txt |  22 ++++++++++++++++++++++
 attached_assets/image_1769794139175.png                                                          | Bin 0 -> 18934 bytes
 server/production.ts                                                                             |   2 +-
 3 files changed, 23 insertions(+), 1 deletion(-)
 create mode 100644 attached_assets/Pasted-obtv-admin-mov-orc-dev-opt-color-routing-orchestrator-j_1769794130624.txt
 create mode 100644 attached_assets/image_1769794139175.png

> rest-express@1.0.0 build
> tsx script/build.ts

building client...
vite v7.3.0 building client environment for production...
transforming (5) ../node_modules/@tanstack/react-query/build/modern/index.js
A PostCSS plugin did not pass the `from` option to `postcss.parse`. This may cause imported assets to be incorrectly transformed. If you've recently added a PostCSS plugin that raised this warning, please contact the package author to fix the issue.
✓ 2044 modules transformed.
../dist/public/index.html                   2.01 kB │ gzip:   0.77 kB
../dist/public/assets/index-DTLB9EgD.css   74.06 kB │ gzip:  11.81 kB
../dist/public/assets/index-8hh-ozbc.js   439.08 kB │ gzip: 134.95 kB
✓ built in 3.84s
building server...

  dist/index.cjs  816.3kb

⚡ Done in 57ms
obtv-admin@mov-orc-dev:/opt/color-routing-orchestrator$ sudo journalctl -u color-routing-orchestrator -f
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at pathToRegexp (/opt/color-routing-orchestrator/node_modules/path-to-regexp/src/index.ts:480:54)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at Object.match (/opt/color-routing-orchestrator/node_modules/path-to-regexp/src/index.ts:438:28)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at matcher (/opt/color-routing-orchestrator/node_modules/router/lib/layer.js:86:23)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at new Layer (/opt/color-routing-orchestrator/node_modules/router/lib/layer.js:93:62)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at Function.route (/opt/color-routing-orchestrator/node_modules/router/index.js:428:17)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at Function.route (/opt/color-routing-orchestrator/node_modules/express/lib/application.js:257:22)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at app.<computed> [as get] (/opt/color-routing-orchestrator/node_modules/express/lib/application.js:478:22)
Jan 30 17:31:23 mov-orc-dev npx[13348]:     at main (/opt/color-routing-orchestrator/server/production.ts:131:7) {
Jan 30 17:31:23 mov-orc-dev npx[13348]:   originalPath: '*'
Jan 30 17:31:23 mov-orc-dev npx[13348]: }
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] Starting with: /opt/color-routing-orchestrator/venv/bin/python3
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] INFO:     Started server process [13367]
Jan 30 17:31:27 mov-orc-dev npx[13348]: INFO:     Waiting for application startup.
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] ERROR:    Traceback (most recent call last):
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/starlette/routing.py", line 694, in lifespan
Jan 30 17:31:27 mov-orc-dev npx[13348]:     async with self.lifespan_context(app) as maybe_state:
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
Jan 30 17:31:27 mov-orc-dev npx[13348]:     return await anext(self.gen)
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/server_python/main.py", line 28, in lifespan
Jan 30 17:31:27 mov-orc-dev npx[13348]:     await get_pool()
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/server_python/database.py", line 12, in get_pool
Jan 30 17:31:27 mov-orc-dev npx[13348]:     pool = await asyncpg.create_pool(DATABASE_URL)
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/pool.py", line 439, in _async__init__
Jan 30 17:31:27 mov-orc-dev npx[13348]:     await self._initialize()
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/pool.py", line 466, in _initialize
Jan 30 17:31:27 mov-orc-dev npx[13348]:     await first_ch.connect()
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/pool.py", line 153, in connect
Jan 30 17:31:27 mov-orc-dev npx[13348]:     self._con = await self._pool._get_new_connection()
Jan 30 17:31:27 mov-orc-dev npx[13348]:                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/pool.py", line 538, in _get_new_connection
Jan 30 17:31:27 mov-orc-dev npx[13348]:     con = await self._connect(
Jan 30 17:31:27 mov-orc-dev npx[13348]:           ^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connection.py", line 2443, in connect
Jan 30 17:31:27 mov-orc-dev npx[13348]:     return await connect_utils._connect(
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1249, in _connect
Jan 30 17:31:27 mov-orc-dev npx[13348]:     raise last_error or exceptions.TargetServerAttributeNotMatched(
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1218, in _connect
Jan 30 17:31:27 mov-orc-dev npx[13348]:     conn = await _connect_addr(
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1054, in _connect_addr
Jan 30 17:31:27 mov-orc-dev npx[13348]:     return await __connect_addr(params, True, *args)
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 1099, in __connect_addr
Jan 30 17:31:27 mov-orc-dev npx[13348]:     tr, pr = await connector
Jan 30 17:31:27 mov-orc-dev npx[13348]:              ^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/opt/color-routing-orchestrator/venv/lib/python3.12/site-packages/asyncpg/connect_utils.py", line 969, in _create_ssl_connection
Jan 30 17:31:27 mov-orc-dev npx[13348]:     tr, pr = await loop.create_connection(
Jan 30 17:31:27 mov-orc-dev npx[13348]:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/asyncio/base_events.py", line 1080, in create_connection
Jan 30 17:31:27 mov-orc-dev npx[13348]:     infos = await self._ensure_resolved(
Jan 30 17:31:27 mov-orc-dev npx[13348]:             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/asyncio/base_events.py", line 1456, in _ensure_resolved
Jan 30 17:31:27 mov-orc-dev npx[13348]:     return await loop.getaddrinfo(host, port, family=family, type=type,
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/asyncio/base_events.py", line 901, in getaddrinfo
Jan 30 17:31:27 mov-orc-dev npx[13348]:     return await self.run_in_executor(
Jan 30 17:31:27 mov-orc-dev npx[13348]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
Jan 30 17:31:27 mov-orc-dev npx[13348]:     result = self.fn(*self.args, **self.kwargs)
Jan 30 17:31:27 mov-orc-dev npx[13348]:              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]:   File "/usr/lib/python3.12/socket.py", line 963, in getaddrinfo
Jan 30 17:31:27 mov-orc-dev npx[13348]:     for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
Jan 30 17:31:27 mov-orc-dev npx[13348]:                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Jan 30 17:31:27 mov-orc-dev npx[13348]: socket.gaierror: [Errno -2] Name or service not known
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] ERROR:    Application startup failed. Exiting.
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] process exited with code 3
Jan 30 17:31:27 mov-orc-dev npx[13348]: [python] Restarting in 5 seconds...